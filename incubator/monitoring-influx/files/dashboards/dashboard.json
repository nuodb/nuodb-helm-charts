{
 "annotations": {
  "list": [
   {
    "builtIn": 1,
    "datasource": "-- Grafana --",
    "enable": true,
    "hide": true,
    "iconColor": "rgba(0, 211, 255, 1)",
    "name": "Annotations & Alerts",
    "type": "dashboard"
   }
  ]
 },
 "editable": true,
 "gnetId": null,
 "graphTooltip": 1,
 "hideControls": false,
 "id": null,
 "links": [
  {
   "asDropdown": true,
   "icon": "external link",
   "includeVars": true,
   "keepTime": true,
   "tags": [
    "overview"
   ],
   "title": "top views",
   "type": "dashboards"
  },
  {
   "asDropdown": true,
   "icon": "external link",
   "includeVars": true,
   "keepTime": true,
   "tags": [
    "nuodb"
   ],
   "title": "nuodb",
   "type": "dashboards"
  }
 ],
 "refresh": "10s",
 "rows": [
  {
   "collapse": false,
   "height": 141,
   "panels": [
    {
     "cacheTimeout": null,
     "colorBackground": false,
     "colorValue": false,
     "colors": [
      "rgba(245, 54, 54, 0.9)",
      "rgba(237, 129, 40, 0.89)",
      "rgba(50, 172, 45, 0.97)"
     ],
     "datasource": null,
     "format": "none",
     "gauge": {
      "maxValue": 100,
      "minValue": 0,
      "show": false,
      "thresholdLabels": false,
      "thresholdMarkers": true
     },
     "hideTimeOverride": true,
     "id": 5,
     "interval": null,
     "links": [],
     "mappingType": 1,
     "mappingTypes": [
      {
       "name": "value to text",
       "value": 1
      },
      {
       "name": "range to text",
       "value": 2
      }
     ],
     "maxDataPoints": 100,
     "nullPointMode": "connected",
     "nullText": null,
     "postfix": "",
     "postfixFontSize": "50%",
     "prefix": "",
     "prefixFontSize": "50%",
     "rangeMaps": [
      {
       "from": "null",
       "text": "N/A",
       "to": "null"
      }
     ],
     "span": 4,
     "sparkline": {
      "fillColor": "rgba(31, 118, 189, 0.18)",
      "full": false,
      "lineColor": "rgb(31, 120, 193)",
      "show": false
     },
     "tableColumn": "",
     "targets": [
      {
       "dsType": "influxdb",
       "groupBy": [
        {
         "params": [
          "$interval"
         ],
         "type": "time"
        },
        {
         "params": [
          "null"
         ],
         "type": "fill"
        }
       ],
       "policy": "default",
       "query": "SELECT sum(a) FROM (SELECT mean(\"rate\") as a FROM \"Commits\" WHERE $timeFilter GROUP BY \"host\",\"pid\")",
       "rawQuery": true,
       "refId": "C",
       "resultFormat": "time_series",
       "select": [
        [
         {
          "params": [
           "value"
          ],
          "type": "field"
         },
         {
          "params": [],
          "type": "mean"
         }
        ]
       ],
       "tags": []
      }
     ],
     "thresholds": "",
     "timeFrom": "15s",
     "timeShift": null,
     "title": "TPS",
     "type": "singlestat",
     "valueFontSize": "170%",
     "valueMaps": [
      {
       "op": "=",
       "text": "N/A",
       "value": "null"
      }
     ],
     "valueName": "avg"
    },
    {
     "cacheTimeout": null,
     "colorBackground": false,
     "colorValue": false,
     "colors": [
      "rgba(245, 54, 54, 0.9)",
      "rgba(237, 129, 40, 0.89)",
      "rgba(50, 172, 45, 0.97)"
     ],
     "datasource": null,
     "format": "none",
     "gauge": {
      "maxValue": 100,
      "minValue": 0,
      "show": false,
      "thresholdLabels": false,
      "thresholdMarkers": true
     },
     "hideTimeOverride": true,
     "id": 6,
     "interval": null,
     "links": [],
     "mappingType": 1,
     "mappingTypes": [
      {
       "name": "value to text",
       "value": 1
      },
      {
       "name": "range to text",
       "value": 2
      }
     ],
     "maxDataPoints": 100,
     "nullPointMode": "connected",
     "nullText": null,
     "postfix": "",
     "postfixFontSize": "50%",
     "prefix": "",
     "prefixFontSize": "50%",
     "rangeMaps": [
      {
       "from": "null",
       "text": "N/A",
       "to": "null"
      }
     ],
     "span": 3,
     "sparkline": {
      "fillColor": "rgba(31, 118, 189, 0.18)",
      "full": false,
      "lineColor": "rgb(31, 120, 193)",
      "show": true
     },
     "tableColumn": "",
     "targets": [
      {
       "dsType": "influxdb",
       "groupBy": [
        {
         "params": [
          "$interval"
         ],
         "type": "time"
        },
        {
         "params": [
          "host"
         ],
         "type": "tag"
        },
        {
         "params": [
          "pid"
         ],
         "type": "tag"
        },
        {
         "params": [
          "null"
         ],
         "type": "fill"
        }
       ],
       "measurement": "Milliseconds",
       "policy": "default",
       "query": "SELECT count(\"mean\") FROM (SELECT mean(\"normvalue\") FROM \"Milliseconds\" WHERE \"nodetype\" = 'Transaction' AND $timeFilter GROUP BY \"host\", \"pid\")",
       "rawQuery": true,
       "refId": "A",
       "resultFormat": "time_series",
       "select": [
        [
         {
          "params": [
           "normvalue"
          ],
          "type": "field"
         },
         {
          "params": [],
          "type": "mean"
         }
        ]
       ],
       "tags": [
        {
         "key": "nodetype",
         "operator": "=",
         "value": "Transaction"
        }
       ]
      }
     ],
     "thresholds": "",
     "timeFrom": "20s",
     "title": "# TEs",
     "type": "singlestat",
     "valueFontSize": "170%",
     "valueMaps": [
      {
       "op": "=",
       "text": "N/A",
       "value": "null"
      }
     ],
     "valueName": "total"
    },
    {
     "columns": [],
     "datasource": null,
     "fontSize": "100%",
     "hideTimeOverride": true,
     "id": 7,
     "links": [],
     "pageSize": null,
     "scroll": true,
     "showHeader": true,
     "sort": {
      "col": null,
      "desc": false
     },
     "span": 5,
     "styles": [
      {
       "dateFormat": "YYYY-MM-DD HH:mm:ss",
       "pattern": "Time",
       "type": "hidden"
      },
      {
       "colorMode": null,
       "colors": [
        "rgba(245, 54, 54, 0.9)",
        "rgba(237, 129, 40, 0.89)",
        "rgba(50, 172, 45, 0.97)"
       ],
       "decimals": 0,
       "pattern": "/.*/",
       "thresholds": [],
       "type": "number",
       "unit": "short"
      }
     ],
     "targets": [
      {
       "alias": "",
       "dsType": "influxdb",
       "groupBy": [
        {
         "params": [
          "host"
         ],
         "type": "tag"
        },
        {
         "params": [
          "region"
         ],
         "type": "tag"
        }
       ],
       "measurement": "Milliseconds",
       "orderByTime": "ASC",
       "policy": "default",
       "query": "SELECT count(\"raw\") FROM (SELECT last(\"raw\") as raw FROM \"Milliseconds\" WHERE \"nodetype\" = 'Transaction' AND $timeFilter GROUP BY \"host\", \"region\") GROUP BY \"region\"",
       "rawQuery": true,
       "refId": "A",
       "resultFormat": "table",
       "select": [
        [
         {
          "params": [
           "raw"
          ],
          "type": "field"
         }
        ]
       ],
       "tags": [
        {
         "key": "nodetype",
         "operator": "=",
         "value": "Transaction"
        }
       ]
      }
     ],
     "timeFrom": "10s",
     "timeShift": null,
     "title": "TEs by Region",
     "transform": "table",
     "type": "table"
    }
   ],
   "repeat": null,
   "repeatIteration": null,
   "repeatRowId": null,
   "showTitle": false,
   "title": "Dashboard Row",
   "titleSize": "h6"
  },
  {
   "collapse": false,
   "height": 239,
   "panels": [
    {
     "aliasColors": {},
     "bars": false,
     "dashLength": 10,
     "dashes": false,
     "datasource": null,
     "fill": 1,
     "id": 1,
     "legend": {
      "alignAsTable": true,
      "avg": true,
      "current": true,
      "max": true,
      "min": true,
      "show": false,
      "total": false,
      "values": true
     },
     "lines": true,
     "linewidth": 1,
     "links": [],
     "nullPointMode": "null as zero",
     "percentage": false,
     "pointradius": 5,
     "points": false,
     "renderer": "flot",
     "seriesOverrides": [
      {
       "alias": "# TEs",
       "fill": 0,
       "linewidth": 2,
       "yaxis": 2
      }
     ],
     "spaceLength": 10,
     "span": 12,
     "stack": false,
     "steppedLine": true,
     "targets": [
      {
       "alias": "$col",
       "dsType": "influxdb",
       "groupBy": [
        {
         "params": [
          "10s"
         ],
         "type": "time"
        },
        {
         "params": [
          "none"
         ],
         "type": "fill"
        }
       ],
       "hide": false,
       "measurement": "Commits",
       "policy": "default",
       "refId": "A",
       "resultFormat": "time_series",
       "select": [
        [
         {
          "params": [
           "rate"
          ],
          "type": "field"
         },
         {
          "params": [],
          "type": "sum"
         },
         {
          "params": [
           "TPS"
          ],
          "type": "alias"
         }
        ],
        [
         {
          "params": [
           "rate"
          ],
          "type": "field"
         },
         {
          "params": [],
          "type": "count"
         },
         {
          "params": [
           "# TEs"
          ],
          "type": "alias"
         }
        ]
       ],
       "tags": [
        {
         "key": "nodetype",
         "operator": "=",
         "value": "Transaction"
        }
       ]
      },
      {
       "alias": "$tag_host",
       "dsType": "influxdb",
       "groupBy": [
        {
         "params": [
          "10s"
         ],
         "type": "time"
        },
        {
         "params": [
          "host"
         ],
         "type": "tag"
        },
        {
         "params": [
          "pid"
         ],
         "type": "tag"
        },
        {
         "params": [
          "none"
         ],
         "type": "fill"
        }
       ],
       "hide": true,
       "measurement": "Commits",
       "policy": "default",
       "refId": "B",
       "resultFormat": "time_series",
       "select": [
        [
         {
          "params": [
           "rate"
          ],
          "type": "field"
         },
         {
          "params": [],
          "type": "mean"
         }
        ]
       ],
       "tags": [
        {
         "key": "nodetype",
         "operator": "=",
         "value": "Transaction"
        }
       ]
      },
      {
       "alias": "# TEs",
       "dsType": "influxdb",
       "groupBy": [
        {
         "params": [
          "10s"
         ],
         "type": "time"
        },
        {
         "params": [
          "none"
         ],
         "type": "fill"
        }
       ],
       "hide": true,
       "measurement": "Milliseconds",
       "policy": "default",
       "refId": "C",
       "resultFormat": "time_series",
       "select": [
        [
         {
          "params": [
           "value"
          ],
          "type": "field"
         },
         {
          "params": [],
          "type": "count"
         }
        ]
       ],
       "tags": [
        {
         "key": "nodetype",
         "operator": "=",
         "value": "Transaction"
        }
       ]
      }
     ],
     "thresholds": [],
     "timeFrom": null,
     "timeShift": null,
     "title": "TPS / #TEs",
     "tooltip": {
      "shared": true,
      "sort": 2,
      "value_type": "individual"
     },
     "type": "graph",
     "xaxis": {
      "buckets": null,
      "mode": "time",
      "name": null,
      "show": true,
      "values": []
     },
     "yaxes": [
      {
       "format": "short",
       "label": "TPS",
       "logBase": 1,
       "max": null,
       "min": "0",
       "show": true
      },
      {
       "format": "short",
       "label": "# TEs",
       "logBase": 1,
       "max": null,
       "min": null,
       "show": true
      }
     ]
    }
   ],
   "repeat": null,
   "repeatIteration": null,
   "repeatRowId": null,
   "showTitle": false,
   "title": "Dashboard Row",
   "titleSize": "h6"
  },
  {
   "collapse": false,
   "height": 250,
   "panels": [
    {
     "aliasColors": {},
     "bars": false,
     "dashLength": 10,
     "dashes": false,
     "datasource": null,
     "fill": 1,
     "id": 8,
     "legend": {
      "alignAsTable": true,
      "avg": true,
      "current": true,
      "max": true,
      "min": true,
      "show": false,
      "total": false,
      "values": true
     },
     "lines": true,
     "linewidth": 1,
     "links": [],
     "nullPointMode": "null as zero",
     "percentage": false,
     "pointradius": 5,
     "points": false,
     "renderer": "flot",
     "seriesOverrides": [
      {
       "alias": "# TEs",
       "yaxis": 2
      }
     ],
     "spaceLength": 10,
     "span": 6,
     "stack": true,
     "steppedLine": true,
     "targets": [
      {
       "alias": "total",
       "dsType": "influxdb",
       "groupBy": [
        {
         "params": [
          "10s"
         ],
         "type": "time"
        },
        {
         "params": [
          "none"
         ],
         "type": "fill"
        }
       ],
       "hide": true,
       "measurement": "Commits",
       "policy": "default",
       "refId": "A",
       "resultFormat": "time_series",
       "select": [
        [
         {
          "params": [
           "rate"
          ],
          "type": "field"
         },
         {
          "params": [],
          "type": "sum"
         }
        ]
       ],
       "tags": [
        {
         "key": "nodetype",
         "operator": "=",
         "value": "Transaction"
        }
       ]
      },
      {
       "alias": "$tag_$breakdown",
       "dsType": "influxdb",
       "groupBy": [
        {
         "params": [
          "10s"
         ],
         "type": "time"
        },
        {
         "params": [
          "$breakdown"
         ],
         "type": "tag"
        },
        {
         "params": [
          "none"
         ],
         "type": "fill"
        }
       ],
       "hide": false,
       "measurement": "Commits",
       "policy": "default",
       "refId": "B",
       "resultFormat": "time_series",
       "select": [
        [
         {
          "params": [
           "rate"
          ],
          "type": "field"
         },
         {
          "params": [],
          "type": "sum"
         }
        ]
       ],
       "tags": [
        {
         "key": "nodetype",
         "operator": "=",
         "value": "Transaction"
        }
       ]
      },
      {
       "alias": "# TEs",
       "dsType": "influxdb",
       "groupBy": [
        {
         "params": [
          "10s"
         ],
         "type": "time"
        },
        {
         "params": [
          "none"
         ],
         "type": "fill"
        }
       ],
       "hide": true,
       "measurement": "Milliseconds",
       "policy": "default",
       "refId": "C",
       "resultFormat": "time_series",
       "select": [
        [
         {
          "params": [
           "value"
          ],
          "type": "field"
         },
         {
          "params": [],
          "type": "count"
         }
        ]
       ],
       "tags": [
        {
         "key": "nodetype",
         "operator": "=",
         "value": "Transaction"
        }
       ]
      }
     ],
     "thresholds": [],
     "timeFrom": null,
     "timeShift": null,
     "title": "TPS by $breakdown",
     "tooltip": {
      "shared": true,
      "sort": 2,
      "value_type": "individual"
     },
     "type": "graph",
     "xaxis": {
      "buckets": null,
      "mode": "time",
      "name": null,
      "show": true,
      "values": []
     },
     "yaxes": [
      {
       "format": "short",
       "label": "TPS",
       "logBase": 1,
       "max": null,
       "min": "0",
       "show": true
      },
      {
       "format": "short",
       "label": "# TEs",
       "logBase": 1,
       "max": null,
       "min": null,
       "show": true
      }
     ]
    },
    {
     "aliasColors": {},
     "bars": false,
     "dashLength": 10,
     "dashes": false,
     "datasource": null,
     "fill": 1,
     "id": 9,
     "legend": {
      "alignAsTable": true,
      "avg": true,
      "current": true,
      "max": true,
      "min": true,
      "show": false,
      "total": false,
      "values": true
     },
     "lines": true,
     "linewidth": 1,
     "links": [],
     "nullPointMode": "null as zero",
     "percentage": false,
     "pointradius": 5,
     "points": false,
     "renderer": "flot",
     "seriesOverrides": [
      {
       "alias": "# TEs",
       "yaxis": 2
      }
     ],
     "spaceLength": 10,
     "span": 6,
     "stack": true,
     "steppedLine": true,
     "targets": [
      {
       "alias": "total",
       "dsType": "influxdb",
       "groupBy": [
        {
         "params": [
          "10s"
         ],
         "type": "time"
        },
        {
         "params": [
          "none"
         ],
         "type": "fill"
        }
       ],
       "hide": true,
       "measurement": "Commits",
       "orderByTime": "ASC",
       "policy": "default",
       "refId": "A",
       "resultFormat": "time_series",
       "select": [
        [
         {
          "params": [
           "rate"
          ],
          "type": "field"
         },
         {
          "params": [],
          "type": "sum"
         }
        ]
       ],
       "tags": [
        {
         "key": "nodetype",
         "operator": "=",
         "value": "Transaction"
        }
       ]
      },
      {
       "alias": "$tag_region",
       "dsType": "influxdb",
       "groupBy": [
        {
         "params": [
          "10s"
         ],
         "type": "time"
        },
        {
         "params": [
          "region"
         ],
         "type": "tag"
        },
        {
         "params": [
          "none"
         ],
         "type": "fill"
        }
       ],
       "hide": true,
       "measurement": "Commits",
       "orderByTime": "ASC",
       "policy": "default",
       "refId": "B",
       "resultFormat": "time_series",
       "select": [
        [
         {
          "params": [
           "rate"
          ],
          "type": "field"
         },
         {
          "params": [],
          "type": "count"
         }
        ]
       ],
       "tags": [
        {
         "key": "nodetype",
         "operator": "=",
         "value": "Transaction"
        }
       ]
      },
      {
       "alias": "# TEs",
       "dsType": "influxdb",
       "groupBy": [
        {
         "params": [
          "$__interval"
         ],
         "type": "time"
        },
        {
         "params": [
          "host"
         ],
         "type": "tag"
        },
        {
         "params": [
          "none"
         ],
         "type": "fill"
        }
       ],
       "hide": false,
       "measurement": "ClientCncts",
       "orderByTime": "ASC",
       "policy": "default",
       "refId": "C",
       "resultFormat": "time_series",
       "select": [
        [
         {
          "params": [
           "raw"
          ],
          "type": "field"
         },
         {
          "params": [],
          "type": "last"
         }
        ]
       ],
       "tags": [
        {
         "key": "nodetype",
         "operator": "=",
         "value": "Transaction"
        }
       ]
      }
     ],
     "thresholds": [],
     "timeFrom": null,
     "timeShift": null,
     "title": "Connections by host",
     "tooltip": {
      "shared": true,
      "sort": 2,
      "value_type": "individual"
     },
     "type": "graph",
     "xaxis": {
      "buckets": null,
      "mode": "time",
      "name": null,
      "show": true,
      "values": []
     },
     "yaxes": [
      {
       "format": "short",
       "label": "",
       "logBase": 1,
       "max": null,
       "min": "0",
       "show": false
      },
      {
       "format": "short",
       "label": "# connections",
       "logBase": 1,
       "max": null,
       "min": null,
       "show": true
      }
     ]
    }
   ],
   "repeat": null,
   "repeatIteration": null,
   "repeatRowId": null,
   "showTitle": false,
   "title": "Dashboard Row",
   "titleSize": "h6"
  }
 ],
 "schemaVersion": 14,
 "style": "dark",
 "tags": [
  "overview"
 ],
 "templating": {
  "list": [
   {
    "allValue": ".*",
    "current": {
     "selected": true,
     "text": "host",
     "value": "host"
    },
    "hide": 2,
    "includeAll": false,
    "label": "By",
    "multi": false,
    "name": "breakdown",
    "options": [
     {
      "selected": true,
      "text": "host",
      "value": "host"
     },
     {
      "selected": false,
      "text": "region",
      "value": "region"
     }
    ],
    "query": "host,region",
    "type": "custom"
   }
  ]
 },
 "time": {
  "from": "now-30m",
  "to": "now"
 },
 "timepicker": {
  "refresh_intervals": [
   "5s",
   "10s",
   "30s",
   "1m",
   "5m",
   "15m",
   "30m",
   "1h",
   "2h",
   "1d"
  ],
  "time_options": [
   "5m",
   "15m",
   "1h",
   "6h",
   "12h",
   "24h",
   "2d",
   "7d",
   "30d"
  ]
 },
 "timezone": "",
 "title": "Dashboard",
 "version": 1
}
